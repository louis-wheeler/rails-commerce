<div class="all-products-page">
    <%= render 'layouts/navbar' %>

    <div class="all-products">
        <h2>All Products</h2>
        
        <% if logged_in? && current_user.isAdmin %>
            <%= link_to raw('<span class="fa fa-plus"></span> New Product'), new_product_path, class: 'btn btn-success' %>
        <% end %>
        
        <div class="all-products-content">
            <table class="table table-condensed">
                <%= render @products %>
            </table>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $('tr.product-row').click(function() {
            $(this).next('tr.product-row-detail').find('div').slideToggle(300);
        });
        $('tr.product-row-detail').click(function() {
            $(this).find('div').slideUp(300);
        });
        $('a.btn').click(function(e) {
            e.stopPropagation();
        });
        $('td.product-action-delete button.btn-danger').click(function(e) {
            e.stopPropagation();
            $($(this).attr('data-target')).modal('show');
        });
    });
</script>